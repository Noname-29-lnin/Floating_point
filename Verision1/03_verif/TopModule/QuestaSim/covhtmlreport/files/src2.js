var g_data = {"name":"/home/noname/Documents/project_tiny/Floating_point/Verision1/02_rlt/FPU_unit.sv","src":"module FPU_unit #(\n    parameter NUM_OP    = 1\n)(\n    input logic [NUM_OP-1:0]    i_add_sub       ,\n    input logic [31:0]          i_32_a          ,\n    input logic [31:0]          i_32_b          ,\n    output logic [31:0]         o_32_s          ,\n\n    output logic                o_ov_flag       ,\n    output logic                o_un_flag        \n);\n\n////////////////////////////////////////////////////////////////\n// Expact\n////////////////////////////////////////////////////////////////\nlogic w_sign_a, w_sign_b;\nlogic [7:0] w_exponent_a, w_exponent_b;\nlogic [23:0] w_mantissa_a, w_mantissa_b;\nassign w_sign_a = i_32_a[31];\nassign w_sign_b = i_32_b[31];\nassign w_exponent_a = i_32_a[30:23];\nassign w_exponent_b = i_32_b[30:23]; \nassign w_mantissa_a = {1'b1, i_32_a[22:0]};\nassign w_mantissa_b = {1'b1, i_32_b[22:0]};\n\nlogic w_sign_result;\nlogic [7:0] w_exponent_result;\nlogic [23:0] w_mantissa_result;\n\n////////////////////////////////////////////////////////////////\n// Internal Logic\n////////////////////////////////////////////////////////////////\nlogic w_EXPSWAP_compare;\nlogic [7:0] w_EXPSWAP_max, w_EXPSWAP_min;\nlogic [7:0] w_EXPSUB_diff_value;\n\nlogic w_MAN_SWAP1_sign_max, w_MAN_SWAP1_sign_min;\nlogic [23:0] w_MAN_SWAP1_max, w_MAN_SWAP1_min;\n\nlogic [27:0] w_MAN_SHF_RIGHT_min, w_MAN_SHF_RIGHT_max;\n\nlogic w_MAN_COMP_28BIT_less;\nlogic w_MAN_PRE_SWAP_BY_MAN_compara;\n\nlogic        w_MAN_PRE_SWAP_BY_MAN_sign_max, w_MAN_PRE_SWAP_BY_MAN_sign_min;\nlogic [27:0] w_MAN_PRE_SWAP_BY_MAN_max,      w_MAN_PRE_SWAP_BY_MAN_min;\n\nlogic [27:0] w_MAN_ALU_man;\nlogic        w_MAN_ALU_overflow;\n\nlogic [4:0] w_LOPD_24BIT_one_position;\nlogic       w_LOPD_24BIT_zero_flag;\n\nlogic [7:0] w_EXP_ADJUST_result;\n\nlogic [27:0] w_NORMALIZATION_man;\nlogic [23:0] w_ROUNDING_man;\nlogic        w_ROUNDING_ov_flow;\n\nlogic                    PSC_o_sel_exp;\nlogic [1:0]              PSC_o_sel_man;\n////////////////////////////////////////////////////////////////\n// Tim gia tri khac nnau cua 2 exponent\n////////////////////////////////////////////////////////////////\nEXP_swap #(\n    .SIZE_DATA      (8)\n) EXP_SWAP_UNIT (\n    .i_data_a           (w_exponent_a),\n    .i_data_b           (w_exponent_b),\n    .o_compare          (w_EXPSWAP_compare),   // a < b\n    .o_less_data        (w_EXPSWAP_min),\n    .o_greater_data     (w_EXPSWAP_max) \n);\nEXP_sub #(\n    .SIZE_EXP_SUB   (8)\n) EXP_SUB_UNIT(\n    // i_data_a - i_data_b\n    .i_data_a           (w_EXPSWAP_max),\n    .i_data_b           (w_EXPSWAP_min),\n    .o_sub              (w_EXPSUB_diff_value)\n);\n\n////////////////////////////////////////////////////////////////\n// Tien xu ly Mantissa\n////////////////////////////////////////////////////////////////\n MAN_swap #(\n    .SIZE_MAN       (24)\n) MAN_PRE_SWAP_BY_EXPONENT_UNIT (\n    .i_sign_a           (w_sign_a),\n    .i_sign_b           (w_sign_b),\n    .i_man_a            (w_mantissa_a),\n    .i_man_b            (w_mantissa_b),\n    // i_compare = 1 -> a < b\n    .i_compare          (w_EXPSWAP_compare),\n\n    .o_sign_max         (w_MAN_SWAP1_sign_max),\n    .o_sign_min         (w_MAN_SWAP1_sign_min),\n    .o_man_max          (w_MAN_SWAP1_max),\n    .o_man_min          (w_MAN_SWAP1_min)\n);\nassign w_MAN_SHF_RIGHT_max = {w_MAN_SWAP1_max, 4'b0};\nSHF_right_28bit #(\n    .SIZE_DATA      (28),\n    .SIZE_SHIFT     (5 ) \n) SHF_RIGHT_28BIT_UNIT (\n    .i_shift_number     (w_EXPSUB_diff_value[4:0]),\n    .i_data             ({w_MAN_SWAP1_min, 4'b0}), \n    .o_data             (w_MAN_SHF_RIGHT_min)\n);\nCOMP_28bit #(\n    .SIZE_DATA      (28)\n) MAN_COMP_28BIT_UNIT (\n    .i_data_a           (w_MAN_SHF_RIGHT_max),\n    .i_data_b           (w_MAN_SHF_RIGHT_min),\n    .o_less             (w_MAN_COMP_28BIT_less)\n);\n// assign w_MAN_PRE_SWAP_BY_MAN_compara = w_EXPSWAP_compare | w_MAN_COMP_28BIT_less;\nassign w_MAN_PRE_SWAP_BY_MAN_compara = w_MAN_COMP_28BIT_less;\nMAN_swap #(\n    .SIZE_MAN       (28)\n) MAN_PRE_SWAP_BY_MAN_UNIT (\n    .i_sign_a           (w_MAN_SWAP1_sign_max), // w_MAN_SWAP1_sign_min\n    .i_sign_b           (w_MAN_SWAP1_sign_min), // w_MAN_SWAP1_sign_max\n    .i_man_a            (w_MAN_SHF_RIGHT_max),  // w_MAN_SHF_RIGHT_min\n    .i_man_b            (w_MAN_SHF_RIGHT_min),  // w_MAN_SHF_RIGHT_max\n    // i_compare = 1 -> a < b\n    .i_compare          (w_MAN_PRE_SWAP_BY_MAN_compara),\n\n    .o_sign_max         (w_MAN_PRE_SWAP_BY_MAN_sign_max),\n    .o_sign_min         (w_MAN_PRE_SWAP_BY_MAN_sign_min),\n    .o_man_max          (w_MAN_PRE_SWAP_BY_MAN_max),\n    .o_man_min          (w_MAN_PRE_SWAP_BY_MAN_min)\n);\n\nSIGN_unit SIGN_OUT(\n    .i_add_sub       (i_add_sub),\n    .i_comp_man      (w_MAN_COMP_28BIT_less | w_EXPSWAP_compare),\n    .i_sign_man_a    (w_sign_a),\n    .i_sign_man_b    (w_sign_b),\n    .o_sign_s        (w_sign_result) \n);\n\nMAN_ALU #(\n    .NUM_OP         (NUM_OP),\n    .SIZE_MAN       (28)\n) MAN_ALU_UNIT (\n    .i_fpu_op           (i_add_sub),\n    .i_sign_max         (w_MAN_PRE_SWAP_BY_MAN_sign_max),\n    .i_sign_min         (w_MAN_PRE_SWAP_BY_MAN_sign_min),\n    .i_man_max          (w_MAN_PRE_SWAP_BY_MAN_max),\n    .i_man_min          (w_MAN_PRE_SWAP_BY_MAN_min),\n    .o_man_alu          (w_MAN_ALU_man),\n    .o_overflow         (w_MAN_ALU_overflow)\n);\n\nLOPD_24bit #(\n    .SIZE_DATA      (24),\n    .SIZE_LOPD      (5)      \n) LOPD_24BIT_UNIT (\n    .i_data             (w_MAN_ALU_man[27:4]),\n    .o_one_position     (w_LOPD_24BIT_one_position),\n    .o_zero_flag        (w_LOPD_24BIT_zero_flag)\n);\n\nEXP_adjust #(\n    .SIZE_EXP       (8),\n    .SIZE_LOPD      (8)      \n) EXP_ADJUST_UNIT (\n    .i_overflow         (o_ov_flag),\n    .i_underflow        (w_MAN_ALU_man[27]),\n    .i_zero_flag        (w_LOPD_24BIT_zero_flag),\n    .i_lopd_value       ({3'b0, w_LOPD_24BIT_one_position}),\n    .i_exp_value        (w_EXPSWAP_max),\n    .o_exp_result       (w_EXP_ADJUST_result)\n);\n\nNORMALIZATION_unit #(\n    .SIZE_LOPD      (5),\n    .SIZE_DATA      (28)\n) NORMALIZATION_UNIT (\n    .i_overflow         (w_MAN_ALU_overflow),\n    .i_zero_flag        (w_LOPD_24BIT_zero_flag),\n    .i_one_position     (w_LOPD_24BIT_one_position),\n    .i_mantissa         (w_MAN_ALU_man),\n    .o_mantissa         (w_NORMALIZATION_man) \n);\n\nROUNDING_unit #(\n    .SIZE_MAN       (28),\n    .SIZE_MAN_RESULT(24)\n) ROUNDING_UNIT (\n    .i_man              (w_NORMALIZATION_man),\n    .o_man_result       (w_ROUNDING_man),\n    .o_ov_flow          (w_ROUNDING_ov_flow)\n);\n\nPSC_unit PSC_UNIT(\n    .i_add_sub          (i_add_sub),\n\n    .i_sign_a           (w_sign_a),\n    .i_exp_a            (w_exponent_a),\n    .i_man_a            (w_mantissa_a),\n\n    .i_sign_b           (w_sign_b),\n    .i_exp_b            (w_exponent_b),\n    .i_man_b            (w_mantissa_b),\n\n    .o_sel_exp          (PSC_o_sel_exp),\n    .o_sel_man          (PSC_o_sel_man) \n);\n\n////////////////////////////////////////////////////////////////\n// Output \n////////////////////////////////////////////////////////////////\n// assign w_sign_result        = w_MAN_PRE_SWAP_BY_MAN_sign_max;\n\n// assign w_exponent_result    = w_EXP_ADJUST_result;\nassign w_exponent_result = PSC_o_sel_exp ? 8'hFF : w_EXP_ADJUST_result; \n\n// assign w_mantissa_result    = w_ROUNDING_man;\nMux_4_to_1 #(\n    .SIZE_DATA  (24)\n) SEL_MANTISSA_FOR_RESULT (\n    .i_sel          (PSC_o_sel_man),\n    .i_data_00      (w_ROUNDING_man),\n    .i_data_01      (24'h000000),\n    .i_data_10      (24'h000001),\n    .i_data_11      (w_ROUNDING_man),\n    .o_data         (w_mantissa_result) \n);\n\nassign o_32_s = {w_sign_result, w_exponent_result, w_mantissa_result[22:0]};\nassign o_ov_flag = w_MAN_ALU_overflow | w_ROUNDING_ov_flow;\nassign o_un_flag = ~w_MAN_ALU_man[27];\n\nendmodule\nmodule Mux_4_to_1 #(\n    parameter SIZE_DATA = 8\n)(\n    input logic [1:0]               i_sel    ,\n    input logic [SIZE_DATA-1:0]     i_data_00,\n    input logic [SIZE_DATA-1:0]     i_data_01,\n    input logic [SIZE_DATA-1:0]     i_data_10,\n    input logic [SIZE_DATA-1:0]     i_data_11,\n    output logic [SIZE_DATA-1:0]    o_data    \n);\n\nlogic [SIZE_DATA-1:0] w_o_data;\nalways_comb begin : proc_mux_4_to_1\n    case (i_sel)\n        2'b00: \n            w_o_data = i_data_00;\n        2'b01:\n            w_o_data = i_data_01;\n        2'b10:\n            w_o_data = i_data_10;\n        2'b11:\n            w_o_data = i_data_11; \n        default: \n            w_o_data = i_data_00;\n    endcase\nend\nassign o_data = w_o_data;\n\nendmodule\n","lang":"verilog"};
processSrcData(g_data);