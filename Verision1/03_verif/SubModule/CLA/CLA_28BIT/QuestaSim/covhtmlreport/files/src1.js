var g_data = {"name":"/home/noname/Documents/project_tiny/Floating_point/Verision1/03_verif/SubModule/CLA/CLA_28BIT/tb_CLA_28bit.sv","src":"`timescale 1ns/1ps\n\nmodule tb_CLA_28bit();\n\n    logic i_clk, i_rst_n;\n    logic [27:0] i_data_a;\n    logic [27:0] i_data_b;\n    logic        i_carry;\n    logic [27:0] o_sum;\n    logic        o_carry;\n    logic [28:0] w_expect;\n\n    int test_count = 0;\n    int test_pass  = 0;\n\n    // ================= CLOCK ================= //\n    initial begin\n        i_clk = 1'b0;\n        forever #5 i_clk = ~i_clk;  // 100 MHz clock\n    end\n\n    // ================= DUMP WAVE ================= //\n    initial begin\n        $dumpfile(\"tb_CLA_28bit.vcd\");\n        $dumpvars(0, tb_CLA_28bit);\n    end\n\n    // ================= DUT ================= //\n    CLA_28bit DUT (\n        .i_carry    (i_carry),\n        .i_data_a   (i_data_a),\n        .i_data_b   (i_data_b),\n        .o_sum      (o_sum),\n        .o_carry    (o_carry)\n    );\n\n    // ================= FUNCTION: Golden Reference ================= //\n    function automatic [28:0] f_CLA_expected(\n        input logic [27:0] f_a,\n        input logic [27:0] f_b,\n        input logic        f_cin\n    );\n        begin\n            f_CLA_expected = f_a + f_b + f_cin;\n        end\n    endfunction\n\n    // ================= DISPLAY TASK ================= //\n    task automatic Display_Result(\n        string t_type,\n        input logic [27:0] t_a,\n        input logic [27:0] t_b,\n        input logic        t_cin,\n        input logic [27:0] t_sum,\n        input logic        t_cout\n    );\n        begin\n            $display(\"[%s] a=%h, b=%h, cin=%b => sum=%h, cout=%b\",\n                     t_type, t_a, t_b, t_cin, t_sum, t_cout);\n        end\n    endtask\n\n    // ================= TEST SEQUENCE ================= //\n    initial begin\n        i_rst_n = 0;\n        i_data_a = 0;\n        i_data_b = 0;\n        i_carry  = 0;\n        #20;\n        i_rst_n = 1;\n        #10;\n\n        $display(\"\\n=== START CLA 28-bit TEST ===\\n\");\n\n        // --- Test case 1 ---\n        @(posedge i_clk);\n            i_data_a = 28'h0000000;\n            i_data_b = 28'h0000000;\n            i_carry  = 1'b1;\n            #1;\n            w_expect = f_CLA_expected(i_data_a, i_data_b, i_carry);\n            Display_Result(\"Direct\", i_data_a, i_data_b, i_carry, o_sum, o_carry);\n            $display(\"=> %s: expect=%029b, dut={cout,sum}=%029b\",\n                     (w_expect == {o_carry, o_sum}) ? \"PASS\" : \"FAIL\",\n                     w_expect, {o_carry, o_sum});\n            test_count++;\n            if (w_expect == {o_carry, o_sum}) test_pass++;\n\n        // --- Test case 2 ---\n        @(posedge i_clk);\n            i_data_a = 28'h0FFFFFF;\n            i_data_b = 28'h000001;\n            i_carry  = 1'b0;\n            #1;\n            w_expect = f_CLA_expected(i_data_a, i_data_b, i_carry);\n            Display_Result(\"Direct\", i_data_a, i_data_b, i_carry, o_sum, o_carry);\n            $display(\"=> %s: expect=%029b, dut={cout,sum}=%029b\",\n                     (w_expect == {o_carry, o_sum}) ? \"PASS\" : \"FAIL\",\n                     w_expect, {o_carry, o_sum});\n            test_count++;\n            if (w_expect == {o_carry, o_sum}) test_pass++;\n\n        // --- Test case 3 ---\n        @(posedge i_clk);\n            i_data_a = 28'hFFFFFFF;\n            i_data_b = 28'hFFFFFFF;\n            i_carry  = 1'b1;\n            #1;\n            w_expect = f_CLA_expected(i_data_a, i_data_b, i_carry);\n            Display_Result(\"Direct\", i_data_a, i_data_b, i_carry, o_sum, o_carry);\n            $display(\"=> %s: expect=%029b, dut={cout,sum}=%029b\",\n                     (w_expect == {o_carry, o_sum}) ? \"PASS\" : \"FAIL\",\n                     w_expect, {o_carry, o_sum});\n            test_count++;\n            if (w_expect == {o_carry, o_sum}) test_pass++;\n\n        // --- Random test cases ---\n        repeat (100) begin\n            @(posedge i_clk);\n                i_data_a = $urandom_range(0, 28'hFFFFFFF);\n                i_data_b = $urandom_range(0, 28'hFFFFFFF);\n                i_carry  = $urandom_range(0, 1);\n                #1;\n                w_expect = f_CLA_expected(i_data_a, i_data_b, i_carry);\n                Display_Result(\"Random\", i_data_a, i_data_b, i_carry, o_sum, o_carry);\n                $display(\"=> %s: expect=%029b, dut={cout,sum}=%029b\",\n                         (w_expect == {o_carry, o_sum}) ? \"PASS\" : \"FAIL\",\n                         w_expect, {o_carry, o_sum});\n                test_count++;\n                if (w_expect == {o_carry, o_sum}) test_pass++;\n        end\n\n        // --- Summary ---\n        #10;\n        $display(\"\\n================================\");\n        $display(\"========== TEST SUMMARY ==========\");\n        $display(\"Total test cases: %6d\", test_count);\n        $display(\"Passed          : %6d\", test_pass);\n        $display(\"Failed          : %6d\", test_count - test_pass);\n        $display(\"Pass rate       : %0.2f%%\", (test_pass * 100.0) / test_count);\n        $display(\"================================\\n\");\n\n        #50;\n        $finish;\n    end\n\nendmodule\n","lang":"verilog"};
processSrcData(g_data);